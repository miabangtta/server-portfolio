!function(e){function t(l){if(o[l])return o[l].exports;var r=o[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,l){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){const l=document.querySelector(".spinner");document.onload=void l.classList.add("spinner_hidden");const r=o(1),n=o(2),i=o(3);if(r(),n(),null!==document.querySelector(".index__wrap")){const e=document.querySelector(".index__wrap"),t=document.querySelector(".index__flip-button"),o=document.querySelector(".index__button-back");t.addEventListener("click",o=>{o.preventDefault(),e.classList.add("index__wrap_rotate"),t.style.opacity="0"}),o.addEventListener("click",o=>{o.preventDefault(),e.classList.remove("index__wrap_rotate"),t.style.opacity="1"})}if(null!==document.querySelector(".hero__menu-icon")){const e=document.querySelector(".hero__menu-icon"),t=document.querySelector(".hero__menu");e.addEventListener("click",e=>{e.preventDefault(),t.classList.toggle("hero__menu_active")})}if(null!==document.querySelector(".articles__item")){const e=document.querySelector(".blog__sidebar"),t=document.querySelector(".blog__content");window.onscroll=function(){const o=document.documentElement.clientHeight/2,l=document.querySelectorAll(".articles__item"),r=Array.prototype.slice.call(l),n=document.querySelectorAll(".blog__headings-item"),i=Array.prototype.slice.call(n);for(var a=0;a<r.length;a++)r[a].getBoundingClientRect().top<-15||r[a].getBoundingClientRect().top>o?i[a].classList.remove("blog__headings-item_active"):i[a].classList.add("blog__headings-item_active");e.getBoundingClientRect().top<=30&&e.classList.add("blog__sidebar_freeze"),t.getBoundingClientRect().top>30&&e.classList.remove("blog__sidebar_freeze")};document.querySelector(".blog__sidebar-trigger").onclick=function(e){document.querySelector(".blog__sidebar").classList.toggle("blog__sidebar_visible"),document.querySelector(".blog__content").classList.toggle("blog__content_short")}}if(null!==document.querySelector(".blog__headings-link"))(function(){var e=document.querySelectorAll(".blog__headings-link");[].forEach.call(e,function(e){e.addEventListener("click",function(t){t.preventDefault();var o=e.getAttribute("href"),l=document.querySelector(o),r=e.getAttribute("data-speed");l&&function(e,t){var o,l=window.pageYOffset,r=e.offsetTop,n=(r-l)/(t/16);o=n>=0?function(){window.pageYOffset>=r-n&&clearInterval(i)}:function(){window.pageYOffset<=(r||0)&&clearInterval(i)};var i=setInterval(function(){window.scrollBy(0,n),o()},16)}(l,r||500)},!1)})})();null!==document.querySelector(".map")&&i()},function(e,t){function o(e){l[s].className="slider__item",a[s].className="slider-nav__item",s=(e+l.length)%l.length,l[s].className="slider__item slider__item_active",a[s].className="slider-nav__item slider-nav__item_active"}const l=document.querySelectorAll(".slider__item"),r=document.querySelector(".slider__controls_next"),n=document.querySelector(".slider__controls_previous"),i=document.querySelectorAll(".slider__controls"),a=document.querySelectorAll(".slider-nav__item"),c=document.querySelector(".slider-nav__list");let s=0;e.exports=function(){0!==l.length&&(r.onclick=function(){o(s+1)},n.onclick=function(){o(s-1)},c.onclick=function(e){"LI"==e.target.tagName&&o(e.target.getAttribute("data-scroll-to"))},function(){for(var e=0;e<i.length;e++)i[e].style.display="block"}())}},function(e,t,o){var l,r;!function(o,n){void 0===(r=function(){return o.svg4everybody=n()}.apply(t,l=[]))||(e.exports=r)}(this,function(){function e(e,t){if(t){var o=document.createDocumentFragment(),l=!e.getAttribute("viewBox")&&t.getAttribute("viewBox");l&&e.setAttribute("viewBox",l);for(var r=t.cloneNode(!0);r.childNodes.length;)o.appendChild(r.firstChild);e.appendChild(o)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var o=t._cachedDocument;o||(o=t._cachedDocument=document.implementation.createHTMLDocument(""),o.body.innerHTML=t.responseText,t._cachedTarget={}),t._embeds.splice(0).map(function(l){var r=t._cachedTarget[l.id];r||(r=t._cachedTarget[l.id]=o.getElementById(l.id)),e(l.svg,r)})}},t.onreadystatechange()}return function(o){function l(){for(var o=0;o<c.length;){var s=c[o],u=s.parentNode;if(u&&/svg/i.test(u.nodeName)){var d=s.getAttribute("xlink:href");if(r&&(!n.validate||n.validate(d,u,s))){u.removeChild(s);var m=d.split("#"),y=m.shift(),f=m.join("#");if(y.length){var p=i[y];p||((p=i[y]=new XMLHttpRequest).open("GET",y),p.send(),p._embeds=[]),p._embeds.push({svg:u,id:f}),t(p)}else e(u,document.getElementById(f))}}else++o}a(l,67)}var r,n=Object(o);r="polyfill"in n?n.polyfill:/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537;var i={},a=window.requestAnimationFrame||setTimeout,c=document.getElementsByTagName("use");r&&l()}})},function(e,t){var o={default:null,forest:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"man_made",elementType:"geometry.stroke",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#86A77A"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]};window.initMap=(()=>{var e=new google.maps.Map(document.querySelector(".google-map"),{zoom:13,center:{lat:55.760046,lng:37.599969},mapTypeControl:!1,scrollwheel:!1,disableDefaultUI:!0});new google.maps.Marker({position:{lat:55.761406,lng:37.63217},map:e,icon:{url:"./assets/images/icons/map_marker.svg",scaledSize:new google.maps.Size(25,35)}});e.setOptions({styles:o.forest})})}]);

if (document.querySelector('#form-message')!=null) {
const formMail = document.querySelector('#form-message');
formMail.addEventListener('submit', prepareSendMail);

function prepareSendMail(e) {
  e.preventDefault();
  let resultContainer = document.querySelector('.message__status');
  let data = {
    name: formMail.name.value,
    email: formMail.email.value,
    text: formMail.text.value
  };
  resultContainer.innerHTML = 'Отправляем письмо...';
  sendAjaxJson('/contact', data, function (data) {
    resultContainer.innerHTML = data;
  });
}

function sendAjaxJson(url, data, cb) {
  let xhr = new XMLHttpRequest();
  xhr.open('POST', url, true);
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.onload = function (e) {
    let result = JSON.parse(xhr.responseText);
    cb(result.msg);
  };
  xhr.send(JSON.stringify(data));
}
}